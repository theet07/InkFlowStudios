<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Ink Flow Estúdio de Tatuagem</title>
    <meta name="description" content="Faça login ou cadastre-se no Ink Flow para acompanhar seus agendamentos e histórico.">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .auth-container {
            min-height: calc(100vh - 80px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }
        
        .auth-box {
            background-color: var(--secondary-dark);
            padding: 3rem;
            border-radius: 15px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 2rem;
            border-radius: 8px;
            overflow: hidden;
            background-color: var(--primary-dark);
        }
        
        .auth-tab {
            flex: 1;
            padding: 12px;
            background-color: transparent;
            color: var(--text-gray);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .auth-tab.active {
            background-color: var(--accent-red);
            color: var(--text-light);
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .forgot-password {
            text-align: center;
            margin-top: 1rem;
        }
        
        .forgot-password a {
            color: var(--accent-red);
            text-decoration: none;
            font-size: 0.9rem;
        }
        
        .forgot-password a:hover {
            text-decoration: underline;
        }
        

    </style>
</head>
<body>
    <header>
        <nav>
            <a href="index.html" class="logo">INK FLOW</a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="sobre.html">Sobre Nós</a></li>
                <li><a href="portfolio.html">Portfólio</a></li>
                <li><a href="servicos.html">Serviços</a></li>
                <li><a href="agendamento.html">Agendamento</a></li>
                <li><a href="contato.html">Contato</a></li>
            </ul>
            <a href="login.html" style="color: var(--text-light); text-decoration: none; padding: 0.5rem 1rem; border: 1px solid var(--accent-red); border-radius: 4px; transition: all 0.3s ease;">Login</a>
        </nav>
    </header>

    <main>
        <div class="auth-container">
            <div class="auth-box">
                <div class="auth-tabs">
                    <button class="auth-tab active" onclick="switchTab('login')">Login</button>
                    <button class="auth-tab" onclick="switchTab('register')">Cadastro</button>
                    <button class="auth-tab" onclick="switchTab('admin')">Administrador</button>
                </div>

                <!-- Formulário de Login -->
                <form id="login-form" class="auth-form active">
                    <h2 style="text-align: center; margin-bottom: 2rem; color: var(--accent-red);">
                        Bem-vindo de volta!
                    </h2>
                    
                    <div class="form-group">
                        <label for="login-email">E-mail</label>
                        <input type="email" id="login-email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="login-password">Senha</label>
                        <input type="password" id="login-password" name="password" required>
                    </div>

                    <div class="form-group">
                        <label for="remember-me" style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="remember-me" name="remember" style="width: auto; margin-right: 0.5rem;">
                            Lembrar de mim
                        </label>
                    </div>

                    <button type="submit" class="btn" style="width: 100%; margin-bottom: 1rem;">
                        Entrar
                    </button>

                    <div class="forgot-password">
                        <a href="#" onclick="showForgotPassword()">Esqueceu sua senha?</a>
                    </div>
                </form>

                <!-- Formulário de Cadastro -->
                <form id="register-form" class="auth-form">
                    <h2 style="text-align: center; margin-bottom: 2rem; color: var(--accent-red);">
                        Crie sua conta
                    </h2>
                    
                    <div class="form-group">
                        <label for="register-email">E-mail</label>
                        <input type="email" id="register-email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="register-password">Senha</label>
                        <input type="password" id="register-password" name="password" required minlength="6">
                    </div>

                    <div class="form-group">
                        <label for="register-confirm">Confirmar Senha</label>
                        <input type="password" id="register-confirm" name="confirm-password" required>
                    </div>

                    <button type="submit" class="btn" style="width: 100%;">
                        Criar Conta
                    </button>
                </form>

                <!-- Formulário de Administrador -->
                <form id="admin-form" class="auth-form">
                    <h2 style="text-align: center; margin-bottom: 2rem; color: var(--accent-red);">
                        Acesso Administrativo
                    </h2>
                    
                    <div class="form-group">
                        <label for="admin-email">E-mail Admin</label>
                        <input type="email" id="admin-email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="admin-password">Senha Admin</label>
                        <input type="password" id="admin-password" name="password" required>
                    </div>

                    <button type="submit" class="btn" style="width: 100%;">
                        Entrar como Admin
                    </button>
                </form>

            </div>
        </div>
    </main>

    <footer>
        <div style="display: flex; justify-content: center; gap: 2rem; margin-bottom: 2rem;">
            <a href="https://www.instagram.com/inkflowstudios" target="_blank" style="color: var(--text-gray); text-decoration: none; padding: 0.5rem; border: 1px solid #333; border-radius: 4px; transition: all 0.3s ease; display: flex; align-items: center; gap: 0.5rem;" aria-label="Instagram">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                </svg>
                Instagram
            </a>
            <a href="https://www.tiktok.com/@inkflowstudios" target="_blank" style="color: var(--text-gray); text-decoration: none; padding: 0.5rem; border: 1px solid #333; border-radius: 4px; transition: all 0.3s ease; display: flex; align-items: center; gap: 0.5rem;" aria-label="TikTok">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/>
                </svg>
                TikTok
            </a>
            <a href="https://wa.me/15144373894" target="_blank" style="color: var(--text-gray); text-decoration: none; padding: 0.5rem; border: 1px solid #333; border-radius: 4px; transition: all 0.3s ease; display: flex; align-items: center; gap: 0.5rem;" aria-label="WhatsApp">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.488"/>
                </svg>
                WhatsApp
            </a>
        </div>
        <div style="text-align: center; color: var(--text-gray); font-size: 0.9rem;">
            <p>&copy; 2025 Ink Flow Estúdio de Tatuagem Ltda. Todos os direitos reservados.</p>
            <p>São Paulo, SP - Brasil | CNPJ: 00.000.000/0001-00</p>
        </div>
    </footer>

    <script src="js/auth.js"></script>
    <script src="js/script.js"></script>
    <script>


        function switchTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(tab + '-form').classList.add('active');
        }

        function showForgotPassword() {
            alert('Funcionalidade de recuperação de senha será implementada. Por enquanto, entre em contato conosco pelo WhatsApp: (11) 99999-9999');
        }

        // Função para validar se o email é real
        async function validateEmailExists(email) {
            const validDomains = [
                'gmail.com', 'outlook.com', 'hotmail.com', 'yahoo.com', 'live.com',
                'icloud.com', 'protonmail.com', 'aol.com', 'mail.com', 'zoho.com',
                'uol.com.br', 'bol.com.br', 'terra.com.br', 'ig.com.br', 'globo.com',
                'r7.com', 'oi.com.br', 'zipmail.com.br', 'click21.com.br'
            ];
            
            const domain = email.split('@')[1];
            if (!domain) return false;
            
            // Verificar se é um domínio conhecido
            if (validDomains.includes(domain.toLowerCase())) {
                return true;
            }
            
            // Para outros domínios, fazer uma verificação básica de formato
            const domainRegex = /^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;
            return domainRegex.test(domain);
        }



        // Sistema de login funcional
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const remember = document.getElementById('remember-me').checked;
            
            // Validação básica
            if (!email || !password) {
                alert('Por favor, preencha todos os campos.');
                return;
            }
            
            // Verificar credenciais
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                // Login bem-sucedido - usar as chaves corretas
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userEmail', user.email);
                localStorage.setItem('currentUser', user.email);
                
                const loginData = {
                    isLoggedIn: true,
                    user: {
                        id: user.id,
                        email: user.email,
                        name: user.name || user.email
                    },
                    loginTime: new Date().toISOString()
                };
                
                if (remember) {
                    localStorage.setItem('loginData', JSON.stringify(loginData));
                } else {
                    sessionStorage.setItem('loginData', JSON.stringify(loginData));
                }
                
                alert('Login realizado com sucesso! Redirecionando...');
                setTimeout(() => {
                    // Verificar se há parâmetro de redirecionamento
                    const urlParams = new URLSearchParams(window.location.search);
                    const redirect = urlParams.get('redirect');
                    window.location.href = redirect || 'index.html';
                }, 1000);
            } else {
                // Verificar se o email existe
                const emailExists = users.find(u => u.email === email);
                if (!emailExists) {
                    alert('Este e-mail não está cadastrado. Por favor, crie uma conta primeiro.');
                } else {
                    alert('Senha incorreta. Tente novamente.');
                }
            }
        });
        
        // Sistema de cadastro funcional
        document.getElementById('register-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm').value;
            
            if (!email || !password || !confirmPassword) {
                alert('Por favor, preencha todos os campos.');
                return;
            }
            
            // Validar se o email é real
            const isValidEmail = await validateEmailExists(email);
            if (!isValidEmail) {
                alert('Por favor, use um e-mail válido de provedores como Gmail, Outlook, Yahoo, etc.');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('As senhas não coincidem!');
                return;
            }
            
            if (password.length < 6) {
                alert('A senha deve ter pelo menos 6 caracteres.');
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            if (users.find(u => u.email === email)) {
                alert('Este e-mail já está cadastrado!');
                return;
            }
            
            const newUser = {
                id: Date.now(),
                email: email,
                password: password,
                createdAt: new Date().toISOString()
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            alert('Cadastro realizado com sucesso!');
            document.getElementById('register-form').reset();
            switchTab('login');
            document.getElementById('login-email').value = email;
        });

        // Sistema de login administrativo
        document.getElementById('admin-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('admin-email').value;
            const password = document.getElementById('admin-password').value;
            
            // Credenciais de administrador
            const adminCredentials = {
                email: 'admin@inkflowstudios.com',
                password: 'InkFlow2024!'
            };
            
            if (email === adminCredentials.email && password === adminCredentials.password) {
                // Login admin bem-sucedido
                const adminData = {
                    isLoggedIn: true,
                    isAdmin: true,
                    user: {
                        id: 'admin',
                        email: email,
                        name: 'Administrador',
                        role: 'admin'
                    },
                    loginTime: new Date().toISOString()
                };
                
                localStorage.setItem('loginData', JSON.stringify(adminData));
                localStorage.setItem('adminLoggedIn', 'true');
                alert('Login administrativo realizado com sucesso!');
                
                // Criar página de admin se não existir
                setTimeout(() => {
                    window.location.href = 'admin.html';
                }, 1000);
            } else {
                alert('Credenciais de administrador inválidas!');
            }
        });

    </script>
</body>
</html>